# 智能问答系统配置说明

## OpenAI API 配置

为了获得更智能的问答体验，建议配置OpenAI API：

### 1. 设置环境变量

```bash
# 方式1：直接设置环境变量
export OPENAI_API_KEY="your_api_key_here"
export OPENAI_BASE_URL="https://api.zhizengzeng.com/v1"

# 方式2：创建 .env 文件
echo "OPENAI_API_KEY=your_api_key_here" >> .env
echo "OPENAI_BASE_URL=https://api.zhizengzeng.com/v1" >> .env
```

### 2. 功能对比

| 模式 | OpenAI配置 | 回答质量 | 功能特点 |
|------|------------|----------|----------|
| 智能模式 | ✅ 已配置 | ⭐⭐⭐⭐⭐ | LLM理解、推理、总结 |
| 简单模式 | ❌ 未配置 | ⭐⭐⭐ | 关键词匹配、内容展示 |

### 3. LLM增强功能

#### **问答接口增强**
- 🧠 **问题理解**：LLM分析用户问题的核心意图
- 🔍 **搜索优化**：自动优化搜索查询，提高检索准确性
- 📝 **智能回答**：基于多文档片段生成结构化答案
- 🎯 **双重保障**：搜索优化失败时自动降级到原问题
- 📊 **过程透明**：显示搜索优化和AI增强状态

#### **三层LLM集成**
1. **问题层**：理解和优化用户问题
2. **搜索层**：优化文档检索查询
3. **回答层**：生成智能化回答

#### **智能特性**
- 🌐 **中文优化**：专门针对中文问答优化
- 🔄 **自动降级**：LLM异常时无缝切换到基础模式
- 📈 **搜索增强**：提高文档检索的准确性和相关性
- 💡 **意图识别**：识别问题类型和用户真实需求

### 4. 使用示例

配置完成后，系统会自动使用智能模式：

```
用户问题：什么是人工智能？

智能模式回答：
根据提供的文档内容，人工智能（AI）是指...
[详细的结构化回答，包含多个角度的分析]

简单模式回答：
根据文档《AI基础.pdf》中的相关内容（相似度: 0.85）：
人工智能是一种计算机科学技术...
```

## 启动系统

```bash
# 启动应用
python -m uvicorn asgi:app --host 0.0.0.0 --port 8000 --reload

# 访问地址
文档管理：http://localhost:8000/upload
智能问答：http://localhost:8000/chat
```
